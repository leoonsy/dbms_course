$(function(){var e="core/api.php",r=[];$.ajax({url:"core/api.php?acl",method:"get",dataType:"json",async:!1,success:function(e){r=e}});var t={categories:[{index:"id",title:"ID",type:"number",locked:!0,width:50,editable:!1},{index:"name",title:"Имя",type:"string",width:200}],products:[{index:"id",title:"ID",type:"number",locked:!0,width:50,editable:!1},{index:"category_id",title:"ID категории",type:"number",width:110},{index:"name",title:"Имя",type:"string",width:200},{index:"price",title:"Цена",type:"number",width:80},{index:"count",title:"Количество",type:"string",width:90}],orders:[{index:"id",title:"ID",type:"number",locked:!0,width:50,editable:!1},{index:"customer_id",title:"ID покупателя",type:"number",width:110},{index:"product_id",title:"ID товара",type:"number",width:80},{index:"product_count",title:"Количество товаров",type:"number",width:150},{index:"price",title:"Цена",type:"number",width:80}],customers:[{index:"id",title:"ID",type:"number",locked:!0,width:50,editable:!1},{index:"first_name",title:"Имя",type:"string"},{index:"last_name",title:"Фамилия",type:"string"}]},i={type:"string",width:150,resizable:!0,sortable:!0,editable:r.update},a=[{key:"insert",text:"Добавить",action:"add"},{key:"delete",text:"Удалить",action:"remove",tip:"Выделите строки для удаления"},{key:"search",type:"search",width:350,emptyText:"Поиск",paramsMenu:!0,paramsText:"Параметры"}];a=a.filter(function(e,t,i){return!(!1===r[e.key])});var d=JSON.parse(JSON.stringify(a)),n=JSON.parse(JSON.stringify(a)),s=JSON.parse(JSON.stringify(a)),l={pageSize:20,pageSizeData:[5,10,20,50,100,500,1e3]},o="ru",c=new FancyTab({resizable:!1,renderTo:"mainTable",title:"База данных компьютерного магазина",height:650,trackOver:!0,items:[{title:"Категории",selModel:"rows",type:"grid",data:{proxy:{type:"rest",url:"".concat(e,"?table=categories"),afterRequest:p}},defaults:i,columns:t.categories,tbar:a,clicksToEdit:2,paging:l,i18n:o},{title:"Продукты",selModel:"rows",type:"grid",data:{proxy:{type:"rest",url:"".concat(e,"?table=products"),afterRequest:p}},defaults:i,columns:t.products,tbar:d,clicksToEdit:2,paging:l,i18n:o},{title:"Заказы",selModel:"rows",type:"grid",data:{proxy:{type:"rest",url:"".concat(e,"?table=orders"),afterRequest:p}},defaults:i,columns:t.orders,tbar:n,clicksToEdit:2,paging:l,i18n:o},{title:"Покупатели",selModel:"rows",type:"grid",data:{proxy:{type:"rest",url:"".concat(e,"?table=customers"),afterRequest:p}},defaults:i,columns:t.customers,tbar:s,clicksToEdit:2,paging:l,i18n:o}]});function p(e){if("destroy"==e.type){var t=c.activeTab;if(0!=t&&3!=t)return e;for(var i=0;i<c.items.length;i++)i!=t&&null!=c.items[i].load&&c.items[i].load()}return e}});
//# sourceMappingURL=main.min.js.map
